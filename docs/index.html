<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>town scene</title>
  <meta name="description" content="town scene">
  <script src="https://aframe.io/releases/0.6.0/aframe.min.js"></script>
</head>

<body>
  <a-scene>
    <a-assets>
      <img id="groundTexture" src="https://cdn.aframe.io/a-painter/images/floor.jpg" crossorigin="anonymous">
      <img id="skyTexture" src="https://cdn.aframe.io/a-painter/images/sky.jpg" crossorigin="anonymous">
    </a-assets>

    <!-- Primitives. -->
    <a-box position="-2 0.6 -3" color="#4CC3D9"></a-box>
    <a-octahedron color="#FF926B" rotation="0 -90 0" radius=".2"></a-octahedron>
    <a-sphere color="yellow" radius=".2"></a-sphere>

    <a-plane position="-3 .1 -6" rotation="-90 0 0" width="5" height="2" color="#7BC8A4"></a-plane>
    <a-plane position="-3 .1 -3" rotation="-90 0 0" width="5" height="2" color="#7BC8A4"></a-plane>
    <a-plane position="3 .1 -6" rotation="-90 0 0" width="5" height="2" color="#7BC8A4"></a-plane>
    <a-plane position="3 .1 -3" rotation="-90 0 0" width="5" height="2" color="#7BC8A4"></a-plane>

    <!-- Background sky. -->
    <a-sky height="2048" radius="30" src="#skyTexture" theta-length="90" width="2048"></a-sky>

    <!-- Ground. -->
    <a-circle src="#groundTexture" rotation="-90 0 0" radius="32"></a-circle>


  </a-scene>

  <script>
    const car1 = document.querySelector('a-octahedron');
    const car2 = document.querySelector('a-sphere');
    let pos = -5;
    let cycle = 1;
    setInterval(() => {
      car1.setAttribute('position', `0 0 ${pos}`);
      pos = cycle % 2 === 0 ? pos - 0.1 : pos + 0.1;
      if (Math.round(pos) === 0 || Math.round(pos) === -8) {        
        cycle++;
      }
    }, 100);

    let pos2 = -5;
    let cycle2 = 1;
    setInterval(() => {
      car2.setAttribute('position', `${pos2} 0 -4.6`);
      pos2 = cycle2 % 2 === 0 ? pos2 - 0.1 : pos2 + 0.1;
      if (Math.round(pos2) === 8 || Math.round(pos2) === -8) {
        cycle2++;
      }
    }, 100);
  </script>
</body>

</html>